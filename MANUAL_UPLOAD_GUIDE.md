# Manual ZIP Upload Deployment Guide

## Overview
Since your hosting doesn't support SSH or Git integration, you'll need to upload the Laravel project manually via ZIP file and run a web-based deployment script.

## Step-by-Step Manual Deployment

### Phase 1: Prepare the Project Locally

1. **Clean the Project** (Remove unnecessary files):
```powershell
# Run in your project directory
Remove-Item -Recurse -Force node_modules -ErrorAction SilentlyContinue
Remove-Item -Recurse -Force .git -ErrorAction SilentlyContinue
Remove-Item -Recurse -Force vendor -ErrorAction SilentlyContinue
Remove-Item -Recurse -Force storage/logs/* -ErrorAction SilentlyContinue
Remove-Item -Recurse -Force bootstrap/cache/* -ErrorAction SilentlyContinue
```

2. **Create Production ZIP**:
- Compress the entire project folder into `ezofz-website.zip`
- Ensure all files are included except the ones removed above

### Phase 2: Upload to Hosting

1. **Access Plesk File Manager**:
   - Login to your Plesk control panel
   - Navigate to **Files** section
   - Go to `/httpdocs` directory

2. **Upload ZIP File**:
   - Upload `ezofz-website.zip` to `/httpdocs`
   - Extract the ZIP file
   - Move all contents from extracted folder to `/httpdocs` root
   - Delete the empty folder and ZIP file

3. **Set Document Root**:
   - In Plesk: **Hosting & DNS** → **Apache & nginx Settings**
   - Change **Document root** from `/httpdocs` to `/httpdocs/public`
   - Save changes

### Phase 3: Install Dependencies

1. **Install Composer Dependencies**:
   - In Plesk, go to **Dev Tools** → **PHP Composer**
   - Run command: `install --no-dev --optimize-autoloader`
   - Wait for completion

2. **Alternative Method** (if Composer tool not available):
   - Download `vendor.zip` from a working Laravel installation
   - Upload and extract to your project root

### Phase 4: Run Deployment Script

1. **Execute Manual Deployment**:
   - Open browser and go to: `https://ezofz.web.lk/deploy-manual.php?key=your_secret_deploy_key_2025`
   - Wait for all steps to complete
   - Follow any instructions shown

2. **Verify Deployment**:
   - Test homepage: `https://ezofz.web.lk`
   - Test admin: `https://ezofz.web.lk/admin/dashboard`
   - Check sitemap: `https://ezofz.web.lk/sitemap.xml`

### Phase 5: Security & Cleanup

1. **Delete Deployment Script**:
   ```
   Delete: deploy-manual.php (for security)
   ```

2. **Set File Permissions** (in Plesk File Manager):
   ```
   storage/        → 755 or 775
   bootstrap/cache → 755 or 775
   public/         → 755
   ```

3. **Configure SSL**:
   - In Plesk: **SSL/TLS Certificates**
   - Install Let's Encrypt certificate
   - Enable "Redirect HTTP to HTTPS"

## File Structure After Upload

```
/httpdocs/                     ← Laravel root directory
├── app/
├── bootstrap/
├── config/
├── database/
├── public/                    ← Document root (set in Plesk)
│   ├── index.php
│   ├── .htaccess
│   └── ...
├── resources/
├── routes/
├── storage/
├── vendor/                    ← Generated by Composer
├── .env                       ← Created from .env.production
├── deploy-manual.php          ← Delete after deployment
└── ...
```

## Troubleshooting

### Common Issues:

1. **500 Internal Server Error**:
   - Check file permissions: storage/ and bootstrap/cache/ need write permissions
   - Verify .env file exists and has correct database credentials
   - Check error logs in Plesk

2. **Database Connection Error**:
   - Verify database credentials in .env file
   - Check if database exists: `velocity254_easyofficedb`
   - Test database connection in Plesk

3. **Missing Dependencies**:
   - Ensure Composer install completed successfully
   - Check if vendor/ directory exists with all packages

4. **Static Files Not Loading**:
   - Verify document root is set to `/httpdocs/public`
   - Check .htaccess file exists in public directory
   - Clear browser cache

### Emergency Commands (via deploy-manual.php):

Add these to the deployment script if needed:
```php
// Clear all caches
runArtisanCommand("cache:clear");
runArtisanCommand("config:clear");
runArtisanCommand("view:clear");

// Rebuild caches
runArtisanCommand("config:cache");
runArtisanCommand("route:cache");
```

## Production URLs to Test

After deployment, verify these URLs work:

- ✅ **Homepage**: https://ezofz.web.lk
- ✅ **Tools**: https://ezofz.web.lk/tools/unicode-typing
- ✅ **Documents**: https://ezofz.web.lk/documents
- ✅ **Sitemap**: https://ezofz.web.lk/sitemap.xml
- ✅ **Admin** (login required): https://ezofz.web.lk/admin/dashboard

## Support Information

**Hosting Details**:
- Domain: ezofz.web.lk
- Server IP: 46.250.226.182  
- System User: ezofzweb
- Database: velocity254_easyofficedb
- Email: support@ezofz.web.lk

**For Issues**:
1. Check Plesk error logs
2. Review Laravel logs: `/httpdocs/storage/logs/laravel.log`
3. Contact hosting support if server-related issues
